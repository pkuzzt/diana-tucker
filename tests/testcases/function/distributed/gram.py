import numpy as np
import tensorly as tl
from generate import generate

t = tl.tensor([[[0.000000, 1.000000, 2.000000, 10.000000, 11.000000],
                [3.000000, 4.000000, 5.000000, 12.000000, 13.000000],
                [20.000000, 21.000000, 22.000000, 30.000000, 31.000000],
                [40.000000, 41.000000, 42.000000, 50.000000, 51.000000]],
               [[6.000000, 7.000000, 8.000000, 14.000000, 15.000000],
                [9.000000, 10.000000, 11.000000, 16.000000, 17.000000],
                [23.000000, 24.000000, 25.000000, 32.000000, 33.000000],
                [43.000000, 44.000000, 45.000000, 52.000000, 53.000000]],
               [[12.000000, 13.000000, 14.000000, 18.000000, 19.000000],
                [15.000000, 16.000000, 17.000000, 20.000000, 21.000000],
                [26.000000, 27.000000, 28.000000, 34.000000, 35.000000],
                [46.000000, 47.000000, 48.000000, 54.000000, 55.000000]]])

print(t.shape)

t = np.matmul(tl.unfold(t, 1), tl.unfold(t, 1).T)
print(t)
'''
t = 
[[ 1990.  2353.  4487.  7487.]
 [ 2353.  2821.  5525.  9305.]
 [ 4487.  5525. 11599. 19819.]
 [ 7487.  9305. 19819. 34039.]]
'''

# Generate test program
generate(t.flatten())